const axios = require('axios');
const josnData = require('')

const drugsHandler = (req , res)=>{
    //const {limit} =req.query
    //console.log(req.query)

   
    //const url =`https://api.fda.gov/drug/event.json?limit=${limit}`;
    axios.get(josnData).then(result=>{
        console.log(josnData)
      const drugsArray=result.data.results.map(res=>{
          let drug= res.patient.drug
        return new Drug(drug)
         
      })
      res.send(drugsArray)
    })
  }
 

  function addFavHandler(req, res){

    const {medicineName, medicineDescription, medicineImg ,status} = req.body;
    const newDrug = new userModel({
      medicineName: medicineName,
      medicineDescription: medicineDescription,
      medicineImg: medicineImg,
      status : status

    })
    
    newDrug.save();
 }



   
 [{"_id":"60d8368fdbab0326940348ce",
 "medicineName":"DURAGESIC-100",
 "medicineDescription":"Duragesic is a prescription medicine used as a transdermal patch to treat the symptoms of chronic, severe pain in opioid-tolerant patients. Duragesic may be used alone or with other medications.",
 "status":"Avaliable",
 "medicineImg":"https://img.medscapestatic.com/pi/features/drugdirectory/octupdate/JAN00940.jpg",
 "__v":0},
 {"_id":"60d8368fdbab0326940348d0",
 "medicineName":"BONIVA",
 "medicineDescription":"BONIVA is a prescription medicine used to treat or prevent osteoporosis in women after menopause. BONIVA helps increase bone mass and helps reduce the chance of having a spinal fracture (break).",
 "status":"Avaliable",
 "medicineImg":"https://www.henryschein.com/Products/7850003_01_FRONT_S_600x600.jpg",
 "__v":0},
 {"_id":"60d83691dbab0326940348d2",
 "medicineName":"IBUPROFEN",
 "medicineDescription":"Ibuprofen is used primarily to treat fever (including post-vaccination fever), mild to moderate pain , painful menstruation, osteoarthritis, dental pain, headaches, and pain from kidney stones. About 60% of people respond to any NSAID; those who do not respond well to a particular one may respond to another.",
 "status":"Avaliable",
 "medicineImg":"https://cdn.shop-apotheke.com/images/ibuprofen-stada-600-zaepfchen-suppositorien-D03754739-p12.jpg",
 "__v":0},
 {"_id":"60d83692dbab0326940348d4",
 "medicineName":"LYRICA",
 "medicineDescription":"This medication is used to treat pain caused by nerve damage due to diabetes, shingles (herpes zoster) infection, or spinal cord injury. This medication is also used to treat pain in people with fibromyalgia.It is also used with other medications to treat certain types of seizures.",
 "status":"Avaliable",
 "medicineImg":"https://cdn.shop-apotheke.com/images/lyrica-200mg-hartkapseln-D11538501-p10.jpg",
 "__v":0},
 {"_id":"60d83693dbab0326940348d6",
 "medicineName":"DOXYCYCLINE HYCLATE",
 "medicineDescription":"This medication is used to treat a wide variety of bacterial infections, including those that cause acne. This medication is also used to prevent malaria. This medication is known as a tetracycline antibiotic. It works by stopping the growth of bacteria",
 "status":"Avaliable",
 "medicineImg":"https://expressvet.pharmacy/wp-content/uploads/2018/07/Doxycycline-100-mg.jpg",
 "__v":0},
 {"_id":"60d83694dbab0326940348d8",
 "medicineName":"LIPITOR",
 "medicineDescription":"Atorvastatin is used along with a proper diet to help lower bad cholesterol and fats (such as LDL, triglycerides) and raise good cholesterol (HDL) in the blood. It belongs to a group of drugs known as statins, It works by reducing the amount of cholesterol made by the liver.",
 "status":"Avaliable",
 "medicineImg":"https://www.farmalisto.com.co/90240-thickbox_default/comprar-lipitor-10-mg-caja-con-30-tabletas-rx-precio-7703283401634.jpg",
 "__v":0},
 {"_id":"60d83694dbab0326940348da",
 "medicineName":"LETAIRIS",
 "medicineDescription":"Ambrisentan is a drug indicated for use in the treatment of pulmonary hypertension. The peptide endothelin constricts muscles in blood vessels, increasing blood pressure. Ambrisentan, which relaxes those muscles, is an endothelin receptor antagonist, and is selective for the type A endothelin receptor.",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d83695dbab0326940348dc",
 "medicineName":"LETAIRIS",
 "medicineDescription":"Letairis is a prescription medicine used to treat pulmonary arterial hypertension (PAH), which is high blood pressure in the arteries of your lungs",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d83697dbab0326940348e2",
 "medicineName":"LYRICA",
 "medicineDescription":"Fibromyalgia is a perplexing and often debilitating disorder, but treatment can help. Lyrica, a medicine used to treat patients with seizures, pain from shingles, and nerve pain from diabetesand spinal cord injuries, is offering new hope to those living with the pain of fibromyalgia",
 "status":"Avaliable",
 "medicineImg":"https://cdn.shop-apotheke.com/images/lyrica-200mg-hartkapseln-D11538501-p10.jpg",
 "__v":0},
 {"_id":"60d83698dbab0326940348e4",
 "medicineName":"LETAIRIS",
 "medicineDescription":"PULMONARY HYPERTENSION",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d83699dbab0326940348e6",
 "medicineName":"ILARIS",
 "medicineDescription":"CRYOPYRIN ASSOCIATED PERIODIC SYNDROME",
 "status":"Avaliable",
 "medicineImg":"http://drugline.info/img/drug/ilarisv-30763_1.jpg",
 "__v":0},
 {"_id":"60d83699dbab0326940348e8",
 "medicineName":"LETAIRIS",
 "medicineDescription":"CHRONIC OBSTRUCTIVE PULMONARY DISEASE",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d8369adbab0326940348ea",
 "medicineName":"LETAIRIS",
 "medicineDescription":"PRODUCT USED FOR UNKNOWN INDICATION",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d8369bdbab0326940348ec",
 "medicineName":"RANOLAZINE",
 "medicineDescription":"ANGINA PECTORIS",
 "status":"Avaliable",
 "medicineImg":"https://5.imimg.com/data5/NB/TY/GU/SELLER-7038577/ranolazine-500-mg-1000-mg-tablets-500x500.jpeg",
 "__v":0},
 {"_id":"60d8369cdbab0326940348ee",
 "medicineName":"LETAIRIS",
 "medicineDescription":"COR PULMONALE CHRONIC",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d8369cdbab0326940348f0",
 "medicineName":"BENLYSTA",
 "medicineDescription":"SYSTEMIC LUPUS ERYTHEMATOSUS",
 "status":"Avaliable",
 "medicineImg":"http://4.bp.blogspot.com/-51dK1j1YYUw/T3gmdib6bCI/AAAAAAAAADc/Hlv27DP7-qQ/s1600/untitled.JPG",
 "__v":0},
 {"_id":"60d8369ddbab0326940348f2",
 "medicineName":"BELIMUMAB",
 "medicineDescription":"SYSTEMIC LUPUS ERYTHEMATOSUS",
 "status":"Avaliable",
 "medicineImg":"http://farmaciainformativa.com/wp-content/uploads/2018/12/belimumab.jpg",
 "__v":0},
 {"_id":"60d8369edbab0326940348f4",
 "medicineName":"BENLYSTA",
 "medicineDescription":"SYSTEMIC LUPUS ERYTHEMATOSUS",
 "status":"Avaliable",
 "medicineImg":"http://4.bp.blogspot.com/-51dK1j1YYUw/T3gmdib6bCI/AAAAAAAAADc/Hlv27DP7-qQ/s1600/untitled.JPG",
 "__v":0},
 {"_id":"60d8369fdbab0326940348f6",
 "medicineName":"TYVASO",
 "status":"Avaliable",
 "medicineImg":"https://www.tyvaso.com/hcp/images/device-images/tyvaso-inhalation-device.png",
 "__v":0},
 {"_id":"60d8369fdbab0326940348f8",
 "medicineName":"ACETAMINOPHEN.",
 "status":"Avaliable",
 "medicineImg":"https://i5.walmartimages.com/asr/48c30be3-1d83-4fc2-a60c-fe233d611d9e.b966b1fbe08c9eadf40c77486e2a0caf.jpeg",
 "__v":0},
 {"_id":"60d836a0dbab0326940348fa",
 "medicineName":"LETAIRIS",
 "medicineDescription":"PULMONARY HYPERTENSION",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d836a1dbab0326940348fc",
 "medicineName":"PRADAXA",
 "medicineDescription":"ATRIAL FIBRILLATION",
 "status":"Avaliable",
 "medicineImg":"https://cdn.shop-apotheke.com/images/pradaxa-150-mg-hartkapseln-D06561952-p10.jpg",
 "__v":0},
 {"_id":"60d836a2dbab0326940348fe",
 "medicineName":"LETAIRIS",
 "medicineDescription":"PRODUCT USED FOR UNKNOWN INDICATION",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d836a2dbab032694034900",
 "medicineName":"LETAIRIS",
 "medicineDescription":"PRODUCT USED FOR UNKNOWN INDICATION",
 "status":"Avaliable",
 "medicineImg":"http://images.ddccdn.com/images/pills/fio/GIL08010.JPG",
 "__v":0},
 {"_id":"60d836a3dbab032694034902",
 "medicineName":"CEFTRIAXONE",
 "medicineDescription":"LISTERIOSIS",
 "status":"Avaliable",
 "medicineImg":"https://cdn11.bigcommerce.com/s-b7xzv15ucx/images/stencil/1280x1280/products/4728/99/Ceftriaxone_1g__22951.1496763083.jpg?c=2&imbypass=on",
 "__v":0},
 {"_id":"60d836a4dbab032694034904",
 "medicineName":"PREDNISONE",
 "medicineDescription":"IMMUNOSUPPRESSION",
 "status":"Avaliable",
 "medicineImg":"https://www.petsupplies4less.com/assets/images/012122-5-100-1-HR.jpg",
 "__v":0},
 {"_id":"60d836a5dbab032694034906",
 "medicineName":"PACLITAXEL",
 "medicineDescription":"METASTASES TO BREAST",
 "status":"Avaliable",
 "medicineImg":"https://www.cphi-online.com/46/product/96/08/05/p960805img_XL.jpg",
 "__v":0},
 {"_id":"60d836a5dbab032694034908",
 "medicineName":"PARACETAMOLO",
 "medicineDescription":"PAIN",
 "status":"Avaliable",
 "medicineImg":"https://farmahome.it/image/cache/data/pharmadb/041467034-503x530.jpg"}]
  module.exports = {drugsHandler ,addFavHandler}